<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- ========================= -->
    <!-- üìã Form View -->
    <!-- ========================= -->
    <record id="view_expense_category_form" model="ir.ui.view">
        <field name="name">suivi.expense.category.form</field>
        <field name="model">suivi.expense.category</field>
        <field name="arch" type="xml">
            <form string="Cat√©gorie de D√©pense">
                <sheet>
                    <div class="oe_button_box" name="button_box">
                        <button name="toggle_active" type="object" class="oe_stat_button" icon="fa-archive">
                            <field name="active" widget="boolean_button"
                                   options="{'terminology': 'archive'}"/>
                        </button>
                    </div>

                    <!-- ========================= -->
                    <!-- üí∞ SITUATION ACTUELLE - Header Card -->
                    <!-- ========================= -->
                    <div class="alert mb-3" role="alert" 
                         style="padding: 24px; border-radius: 8px; border-left: 6px solid;">
                        <div class="row">
                            <div class="col-8">
                                <h3 class="mb-2" style="font-weight: 600; color: #2C3E50;">
                                    <i class="fa fa-line-chart mr-2"/>Situation Actuelle du Mois
                                </h3>
                                <div style="font-size: 48px; font-weight: 700; margin: 16px 0;">
                                    <field name="current_balance" nolabel="1"
                                           decoration-success="limit_exceeded == False"
                                           decoration-danger="limit_exceeded == True"
                                           style="font-size: inherit;"/>
                                </div>
                                <p class="mb-0" style="font-size: 14px; color: #7F8C8D;">
                                    <field name="limit_exceeded" widget="badge" 
                                           decoration-success="limit_exceeded == False"
                                           decoration-danger="limit_exceeded == True"/>
                                </p>
                            </div>
                            <div class="col-4 text-right">
                                <div class="mt-3">
                                    <i class="fa fa-calendar-check-o fa-5x" 
                                       style="opacity: 0.15; color: #34495E;"/>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ========================= -->
                    <!-- üìù Title Section -->
                    <!-- ========================= -->
                    <div class="oe_title">
                        <h1>
                            <field name="name" placeholder="Nom de la cat√©gorie..."/>
                        </h1>
                    </div>

                    <!-- ========================= -->
                    <!-- ‚öôÔ∏è Configuration Section -->
                    <!-- ========================= -->
                    <group string="‚öôÔ∏è Configuration" col="2">
                        <group string="Param√®tres">
                            <field name="monthly_limit" 
                                   widget="monetary"
                                   options="{'currency_field': 'currency_id'}"
                                   class="oe_inline"/>
                            <field name="is_daily" 
                                   widget="boolean_toggle"
                                   string="Type de cat√©gorie"/>
                        </group>

                        <group string="D√©tails">
                            <field name="description" 
                                   placeholder="Description optionnelle..."
                                   nolabel="1"/>
                        </group>
                    </group>

                    <!-- ========================= -->
                    <!-- üìä Statistics (Optional) -->
                    <!-- ========================= -->
                    <notebook>
                        <page string="üìä Statistiques" name="statistics">
                            <group col="4">
                                <field name="monthly_limit" string="Limite fix√©e" readonly="1"/>
                                <field name="current_balance" string="Montant actuel" readonly="1"/>
                                <field name="limit_exceeded" string="D√©passement" readonly="1" widget="badge"/>
                                <field name="is_daily" string="Type" readonly="1" widget="badge"/>
                            </group>
                        </page>
                    </notebook>

                </sheet>
            </form>
        </field>
    </record>

    <!-- ========================= -->
    <!-- üå≥ Tree View - Enhanced -->
    <!-- ========================= -->
    <record id="view_expense_category_tree" model="ir.ui.view">
        <field name="name">suivi.expense.category.tree</field>
        <field name="model">suivi.expense.category</field>
        <field name="arch" type="xml">
            <tree string="Cat√©gories de D√©penses" 
                  decoration-danger="limit_exceeded == True"
                  decoration-success="limit_exceeded == False">
                <field name="name" string="üìÅ Cat√©gorie"/>
                <field name="monthly_limit" string="üí∞ Limite" widget="monetary"/>
                <field name="current_balance" string="üìä Solde Actuel" 
                       decoration-success="limit_exceeded == False"
                       decoration-danger="limit_exceeded == True"/>
                <field name="limit_exceeded" string="‚ö†Ô∏è Statut" widget="badge"
                       decoration-success="limit_exceeded == False"
                       decoration-danger="limit_exceeded == True"/>
                <field name="is_daily" string="üîÑ Type" widget="boolean_toggle"/>
                <field name="description" string="üìù Description"/>
                <field name="active" widget="boolean_toggle" string="üîì Actif"/>
            </tree>
        </field>
    </record>

    <!-- ========================= -->
    <!-- üîç Search View - Enhanced -->
    <!-- ========================= -->
    <record id="view_expense_category_search" model="ir.ui.view">
        <field name="name">suivi.expense.category.search</field>
        <field name="model">suivi.expense.category</field>
        <field name="arch" type="xml">
            <search string="Rechercher Cat√©gories">
                <field name="name" string="Nom"/>
                <field name="description" string="Description"/>
                <filter string="üî¥ Limite D√©pass√©e" name="filter_exceeded" 
                        domain="[('limit_exceeded', '=', True)]"/>
                <filter string="‚úÖ Dans la Limite" name="filter_ok" 
                        domain="[('limit_exceeded', '=', False)]"/>
                <separator/>
                <filter string="üìÖ Quotidien" name="filter_daily" 
                        domain="[('is_daily', '=', True)]"/>
                <filter string="üìÜ Mensuel" name="filter_monthly" 
                        domain="[('is_daily', '=', False)]"/>
                <separator/>
                <filter string="Archiv√©" name="inactive" 
                        domain="[('active', '=', False)]"/>
                <group expand="0" string="Grouper par">
                    <filter string="Statut" name="group_status" 
                            context="{'group_by': 'limit_exceeded'}"/>
                    <filter string="Type" name="group_type" 
                            context="{'group_by': 'is_daily'}"/>
                </group>
            </search>
        </field>
    </record>

    <!-- ========================= -->
    <!-- üöÄ Action -->
    <!-- ========================= -->
    <record id="action_expense_category" model="ir.actions.act_window">
        <field name="name">Cat√©gories de D√©penses</field>
        <field name="res_model">suivi.expense.category</field>
        <field name="view_mode">tree,form</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                üìÅ Cr√©ez votre premi√®re cat√©gorie de d√©pense
            </p>
            <p>
                Organisez vos d√©penses en cat√©gories pour un meilleur suivi budg√©taire.
            </p>
        </field>
    </record>
</odoo>